<!DOCTYPE html>
<html>
    <head>
        <title>Test web page.</title>  
    </head>
    <body>
        <script type="text/javascript" src="./requests.js"></script>
        <script type="text/javascript" src="./create_client_screen.js"></script>
        <script type="text/javascript" src="./create_client_failed_screen.js"></script>
        <script type="text/javascript" src="./client_menu_screen.js"></script>
        <script type="text/javascript" src="./create_room_screen.js"></script>
        <script type="text/javascript" src="./create_room_fail_screen.js"></script>
        <script type="text/javascript" src="./room_lobby_screen.js"></script>
        <script type="text/javascript" src="./create_candidate_screen.js"></script>
        <script type="text/javascript" src="./vote_screen.js"></script>
        <script type="text/javascript" src="./winner_screen.js"></script>
        <script type="text/javascript" src="./join_room_screen.js"></script>


        <h1>---DEMOGRAZY---</h1>
        <br><br>

        <div id=create_client_screen>
            <h2>Come up with some name to start using the service...</h2>
            <form class="form">
                <label>Name: </label>
                <input type="text" class="name_input">
                <input type="submit" class="submit">
            </form>
        </div>



        <div id=create_client_fail_screen>
            <h2>Failed to connect you to the service :(</h2>
        </div>



        <div id=client_menu_screen>
            <h2 class="welcome_title">Welcome!</h2>
            <br>
            <button class="start_new_voting_btn">Start New Voting</button>
            <br>
            <button class="join_voting_btn">Join Voting</button>
        </div>



        <div id=create_room_screen>
            <h2>Room creation:</h2>
            <br>
            <form class="form">
                <label>Title: </label>
                <input type="text" class="title_input">
                <br>
                <label>Passphrase: </label>
                <input type="text" class="passphrase_input">
                <br>
                <input class="submit" type="submit">
            </form>
        </div>



        <div id=create_room_fail_screen>
            <h2>Failed to create room...</h2>
            <br>
            <button class="back_btn">Okey :(</button>
        </div>



        <div id="join_room_screen">
            <h2>Joining room:</h2>
            <br>
            <form class="form">
                <label>Room Id: </label>
                <input type="text" class="room_id_input">
                <br>
                <label>Passphrase: </label>
                <input type="text" class="passphrase_input">
                <br>
                <input class="join" type="submit">
            </form>
            <br>
            <label class="error_msg">Failed to join room!</label>
        </div>



        <div id=room_lobby_screen>
            <h2 class="room_title">Room Created!</h2>
            
            <br>

            <button class="update_btn">update</button>
            <button class="add_candidate_btn">add candidate</button>
            <br>

            <br>

            <label>Members:</label>
            <ul class="members_list">
            </ul>

            <br>

            <label>Candidates:</label>
            <ul class="candidate_list">
            </ul>

            <br>
            <br>
            
            <button class="start_btn">start voting</button>
            <h4 class="start_error_title">Failed to start voting :(</h4>

        </div>



        <div id=add_candidate_screen>
            <h2>New candidate:</h2>
            <br>
            <form class="form">
                <label>Name: </label>
                <input type="text" class="name_input">
                <input class="submit" type="submit">
            </form>
            <br>
            <h4 class="error_msg">Failed to add new candidate :(</h4>
            <br>
            <button class="go_back">go back</button>
        </div>



        <div id=voting_screen>
            <h2 class="status">Current versus:</h2>
            <br>
            <br>
            
            <div class="vote_panel">                
                <button class="choose_1">Vote for #1---> </button>
                <label class="option_1">Candidate_1</label>
                
                <br>
                <br>
                
                <button class="choose_2">Vote for #2---> </button>
                <label class="option_2">Candidate_2</label>
            </div>

        </div>



        <div id=winner_screen>
            <h3 class="main_header">Put winner here...</h3>
        </div>



        <script>

            let createClientScreen;
            let createClientFailedScreen;
            let clientMenuScreen;
            let createRoomScreen;
            let createRoomFailScreen;
            let roomLobbyScreen;
            let createCandidateScreen;
            let voteScreen;
            let winnerScreen;
            let joinRoomScreen;
            

            main();


            function main()
            {
                init_screens();
                createClientScreen.enable();
            }


            function init_screens()
            {
                createClientScreen = new CreateClientScreen(
                    document.getElementById("create_client_screen"),
                    (clientId) => clientMenuScreen.enable(clientId),
                    () => createClientFailedScreen.enable());

                createClientFailedScreen = new CreateClientFailedScreen(
                    document.getElementById("create_client_fail_screen")
                );

                clientMenuScreen = new ClientMenuScreen(
                    document.getElementById("client_menu_screen"),
                    (clientId) => createRoomScreen.enable(clientId),
                    (clientId) => joinRoomScreen.enable(clientId)
                );

                createRoomScreen = new CreateRoomScreen(
                    document.getElementById("create_room_screen"),
                    (clientId, roomId) => roomLobbyScreen.enable(clientId, roomId, true),
                    (clientId) => createRoomFailScreen.enable(clientId)
                );

                createRoomFailScreen = new CreateRoomFailScreen(
                    document.getElementById("create_room_fail_screen"),
                    (clientId) => clientMenuScreen.enable(clientId)
                );

                joinRoomScreen = new JoinRoomScreen(
                    document.getElementById("join_room_screen"),
                    (clientId, roomId) => roomLobbyScreen.enable(clientId, roomId, false)
                );

                roomLobbyScreen = new RoomLobbyScreen(
                    document.getElementById("room_lobby_screen"),
                    (clientId, roomId) => createCandidateScreen.enable(clientId, roomId),
                    (clientId, roomId) => voteScreen.enable(clientId, roomId)
                );

                createCandidateScreen = new CreateCandidateScreen(
                    document.getElementById("add_candidate_screen"),
                    (clientId, roomId) => roomLobbyScreen.enable(clientId, roomId, true),
                );

                voteScreen = new VoteScreen(
                    document.getElementById("voting_screen"),
                    (winnerId) => winnerScreen.enable(winnerId)
                );

                winnerScreen = new WinnerScreen(
                    document.getElementById("winner_screen"),
                    (clientId, roomId) => roomLobbyScreen.enable(clientId, roomId)
                );
            }

        </script>

    </body>
</html>
<!DOCTYPE html>
<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <title>Test web page.</title>  
    </head>
    <body>
        <script type="text/javascript" src="./requests.js"></script>
        <script type="text/javascript" src="./create_client_screen.js"></script>
        <script type="text/javascript" src="./create_client_failed_screen.js"></script>
        <script type="text/javascript" src="./client_menu_screen.js"></script>
        <script type="text/javascript" src="./create_room_screen.js"></script>
        <script type="text/javascript" src="./create_room_fail_screen.js"></script>
        <script type="text/javascript" src="./room_lobby_screen.js"></script>
        <script type="text/javascript" src="./create_candidate_screen.js"></script>
        <script type="text/javascript" src="./vote_screen.js"></script>
        <script type="text/javascript" src="./winner_screen.js"></script>
        <script type="text/javascript" src="./join_room_screen.js"></script>


        <nav class="navbar bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trophy-fill" viewBox="0 0 16 16">
                        <path d="M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5c0 .538-.012 1.05-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33.076 33.076 0 0 1 2.5.5m.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935zm10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935"/>
                    </svg>
                    <mark>DEMO</mark>GR<mark>A</mark>Z<mark>Y</mark>
                </a>
            </div>
        </nav>

        <br><br>

        <div id="create_client_screen" class="card   shadow p-3 mb-5 bg-body-tertiary rounded  position-absolute top-50 start-50 translate-middle" style="width: 18rem;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Plato%27s_Academy_mosaic_from_Pompeii.jpg/1024px-Plato%27s_Academy_mosaic_from_Pompeii.jpg" class="card-img-top" alt="...">
            <div class="card-body">
                <h5 class="card-title">Let's start!</h5>
                <p class="card-text">Come up with some name to start using the service...</p>

                

                <form class="form form-floating mb-3">
                    <input type="text" class="client_name_input form-control" id="floatingInput" placeholder="mr. John Smith">
                    <label for="floatingInput">Your Name:</label>
                    <br>
                    <input type="submit" class="submit btn btn-primary">
                </form>
            </div>
        </div>




        <div id=create_client_fail_screen>
            <h2>Failed to connect you to the service :(</h2>
        </div>


        <div id="client_menu_screen" class="container align-middle">       
            <div class="row align-items-center justify-content-center  ">
                <div class="col-6 border rounded bg-body-tertiary p-4 shadow p-3 mb-5 bg-body-tertiary rounded">
                    
                    <div class="row">
                        <h1 class="text-secondary">Welcome!</h1>
                    </div>

                    <div class="row">
                        <h5>
                            <span class="welcome_title_client_name">No name</span> 
                            <span class="welcome_title_client_id badge bg-secondary">#</span>
                        </h5>
                    </div>

                    <br>
                        
                        
                    <div class="row p-3 border rounded bg-light">
                        <div class="vstack gap-2 mx-auto">
                            <button type="button" class="start_new_voting_btn btn btn-primary">Start New Voting</button>
                            <button type="button" class="join_voting_btn btn btn-outline-primary">Join Voting</button>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>




        <div id="create_room_screen" class="container align-middle">        
            <div class="row align-items-center justify-content-center  "> 
                <div class="col-6 border rounded bg-body-tertiary p-4 shadow p-3 mb-5 bg-body-tertiary rounded">
                    
                    <div class="row">
                        <h1 class="text-secondary">Let's create a room!</h1>
                    </div>

                    <br>

                    <div class="row p-3 border rounded bg-light">    
                        <form class="form">
                            <div class="form-floating mb-3">
                                <input type="text" class="title_input form-control" id="titleFloatingInput" placeholder="mr. John Smith">
                                <label for="titleFloatingInput">Voting agenda:</label>
                            </div>
                            <br>
                            <div class="form-floating">
                                <input type="text" class="passphrase_input form-control" id="passphrasefloatingInput" placeholder="mr. John Smith">
                                <label for="passphrasefloatingInput">Passphrase:</label>
                            </div>
                            <br>
                            <input type="submit" class="submit btn btn-primary">
                        </form>
                    </div>

                </div>
            </div>
        </div>
        



        <div id=create_room_fail_screen>
            <h2>Failed to create room...</h2>
            <br>
            <button class="back_btn">Okey :(</button>
        </div>




        <div id="join_room_screen" class="container align-middle">        
            <div class="row align-items-center justify-content-center  "> 
                <div class="col-6 border rounded bg-body-tertiary p-4 shadow p-3 mb-5 bg-body-tertiary rounded">
                    
                    <div class="row">
                        <h1 class="text-secondary">What room you want to join?</h1>
                    </div>

                    <br>

                    <div class="row p-3 border rounded bg-light">    
                        <form class="form">
                            <div class="form-floating mb-3">
                                <input type="text" class="room_id_input form-control" id="roomIdFloatingInput" placeholder="mr. John Smith">
                                <label for="roomIdFloatingInput">Room ID:</label>
                            </div>
                            <br>
                            <div class="form-floating">
                                <input type="text" class="passphrase_input form-control" id="passphrasefloatingInput" placeholder="mr. John Smith">
                                <label for="passphrasefloatingInput">Passphrase:</label>
                            </div>
                            <br>
                            <input type="submit" class="join btn btn-primary">
                        </form>
                    </div>
                </div>
            </div>


            <div class="row align-items-center justify-content-center  "> 
                <div class="error_msg col-6 border rounded bg-danger p-4 shadow p-3 mb-5 rounded">
                    <div class="row">
                        <label>Failed to join room!</label>
                    </div>
                </div>
            </div>


        </div>




        <div id="room_lobby_screen" class="container align-middle">        
            <div class="row align-items-center justify-content-center  "> 
                <div class="col-6 border rounded bg-body-tertiary p-4 shadow p-3 mb-5 bg-body-tertiary rounded">
                    
                    <div class="row">
                        <h1>
                            <span class="text-secondary">Room </span>
                            <span class="room_title badge bg-secondary">#</span>
                        </h1>
                    </div>

                    <div class="row">
                        <h5 class="vote_topic">"Vote topic"</h5>
                    </div>

                    <br>

                    <div class="row p-3 border rounded">
                        <button class="btn add_candidate_btn btn-outline-primary p-1">add candidate</button>
                        <button class="btn start_btn btn-primary p-1">start voting</button>                        
                    </div>

                    <br>

                    <div class="row p-1"> 
                        
                        <div class="col">
                            <label>Voters:</label>
                            <ul class="members_list list-group">
                            </ul>
                        </div>
                        
                        <div class="col">
                            <label>Candidates:</label>
                            <ul class="candidate_list list-group">
                            </ul>
                        </div>

                    </div>
                </div>
            </div>


            <div class="row align-items-center justify-content-center  "> 
                <div class="start_error_title col-6 border rounded bg-danger p-4 shadow p-3 mb-5 rounded">
                    <div class="row">
                        <label>Failed to start voting :(</label>
                    </div>
                </div>
            </div>


        </div>





        <div id=add_candidate_screen>
            <h2>New candidate:</h2>
            <br>
            <form class="form">
                <label>Name: </label>
                <input type="text" class="name_input">
                <input class="submit" type="submit">
            </form>
            <br>
            <h4 class="error_msg">Failed to add new candidate :(</h4>
            <br>
            <button class="go_back">go back</button>
        </div>



        <div id=voting_screen>
            <h2 class="status">Current versus:</h2>
            <br>
            <br>
            
            <div class="vote_panel">                
                <button class="choose_1">Vote for #1---> </button>
                <label class="option_1">Candidate_1</label>
                
                <br>
                <br>
                
                <button class="choose_2">Vote for #2---> </button>
                <label class="option_2">Candidate_2</label>
            </div>

        </div>



        <div id=winner_screen>
            <h3 class="main_header">Put winner here...</h3>
        </div>



        <script>

            let createClientScreen;
            let createClientFailedScreen;
            let clientMenuScreen;
            let createRoomScreen;
            let createRoomFailScreen;
            let roomLobbyScreen;
            let createCandidateScreen;
            let voteScreen;
            let winnerScreen;
            let joinRoomScreen;
            

            main();


            function main()
            {
                init_screens();
                createClientScreen.enable();
            }


            function init_screens()
            {
                createClientScreen = new CreateClientScreen(
                    document.getElementById("create_client_screen"),
                    (clientId) => clientMenuScreen.enable(clientId),
                    () => createClientFailedScreen.enable());

                createClientFailedScreen = new CreateClientFailedScreen(
                    document.getElementById("create_client_fail_screen")
                );

                clientMenuScreen = new ClientMenuScreen(
                    document.getElementById("client_menu_screen"),
                    (clientId) => createRoomScreen.enable(clientId),
                    (clientId) => joinRoomScreen.enable(clientId)
                );

                createRoomScreen = new CreateRoomScreen(
                    document.getElementById("create_room_screen"),
                    (clientId, roomId) => roomLobbyScreen.enable(clientId, roomId, true),
                    (clientId) => createRoomFailScreen.enable(clientId)
                );

                createRoomFailScreen = new CreateRoomFailScreen(
                    document.getElementById("create_room_fail_screen"),
                    (clientId) => clientMenuScreen.enable(clientId)
                );

                joinRoomScreen = new JoinRoomScreen(
                    document.getElementById("join_room_screen"),
                    (clientId, roomId) => roomLobbyScreen.enable(clientId, roomId, false)
                );

                roomLobbyScreen = new RoomLobbyScreen(
                    document.getElementById("room_lobby_screen"),
                    (clientId, roomId) => createCandidateScreen.enable(clientId, roomId),
                    (clientId, roomId) => voteScreen.enable(clientId, roomId)
                );

                createCandidateScreen = new CreateCandidateScreen(
                    document.getElementById("add_candidate_screen"),
                    (clientId, roomId) => roomLobbyScreen.enable(clientId, roomId, true),
                );

                voteScreen = new VoteScreen(
                    document.getElementById("voting_screen"),
                    (winnerId) => winnerScreen.enable(winnerId)
                );

                winnerScreen = new WinnerScreen(
                    document.getElementById("winner_screen"),
                    (clientId, roomId) => roomLobbyScreen.enable(clientId, roomId)
                );
            }

        </script>

    </body>
</html>